/**
 * abaaso.tabs
 *
 * @author Jason Mulligan <jason.mulligan@avoidwork.com>
 * @copyright 2013 Jason Mulligan
 * @license BSD-3 <https://raw.github.com/avoidwork/abaaso.tabs/master/LICENSE>
 * @link https://github.com/avoidwork/abaaso.tabs
 * @module abaaso.tabs
 * @version 1.5.0
 */
(function(e){"use strict";var t=/function|string/,n=function(t){var n=t.explode("/"),r=[],i="",s,o;return e("ul.tab > li > a.active, section.tab > section.active").removeClass("active"),e(".tab").addClass("hidden"),e(".root").removeClass("hidden"),n[0]==="#!"&&n.shift(),n.forEach(function(t){s='a[data-hash="'+t+'"]',o='.tab[data-hash="'+t+'"]',s=(i!==""?'ul.active[data-hash="'+i+'"] ':".root ")+s,o=(i!==""?'.tab[data-hash="'+i+'"] ':".root ")+o,e(s).addClass("active"),e(o).addClass("active").removeClass("hidden"),i=t}),e(s+" section.active > section.tab:first-child").addClass("active"),e(o+" section.active > section.tab:first-child").addClass("active").removeClass("hidden"),i.isEmpty()||e('section[data-hash="'+n.join("/")+'"]').addClass("active").removeClass("hidden"),r},r=function(n,r,i,s){var o,u,a,f,l,c,h,p;return i instanceof Object?i["class"]="tab":i={"class":"tab"},s=s||"",l=r instanceof Array,o=n.find("> ul.tab").length>0?n.find("> ul.tab")[0]:n.create("ul",i),c=n.find("> section.tab").length>0?n.find("> section.tab")[0]:n.create("section",{"class":"tab"}),n.hasClass("tab")&&(s="/"+n.data("hash")),s.isEmpty()?(o.addClass("root"),c.addClass("root")):(p=s.replace(/^\/{1,1}/,""),o.data("hash",p),c.data("hash",p)),h=function(n,r){var i,a,p,d;f=l?n:r,u=s+"/"+f.hyphenate().toLowerCase(),i=u.replace(/^\//,""),h=typeof n=="function"?n:function(){void 0},e.route.set(i,h),d=o.create("li").create("a",{"data-hash":f.hyphenate().toLowerCase(),"data-route":u,innerHTML:f,title:f}),d.on("click",function(e){this.hasClass("disabled")||(location.hash="!"+this.data("route"))},"route",d,"all").on("delete",function(t){e.route.del(i)});switch(!0){case t.test(typeof n):case n===null:c.create("section",{"class":"tab hidden","data-hash":i});break;case typeof n=="object":c.tabs(n,null,u),a=e('section[data-hash="'+i+'"]'),n.forEach(function(e,t){var n=typeof e=="object"?t:e;a.create("section",{"class":"tab hidden","data-hash":n.toLowerCase()})})}},r instanceof Array?r.forEach(h):e.iterate(r,h),n},i=function(t,n){if(t instanceof Element&&n!==undefined)return n instanceof Array||(n=n.toString().explode()),n.forEach(function(n){var r=!1,i,s;if(n===undefined)return;n=n.toLowerCase().replace(/^\/{1,1}/,""),i=t.find('a[data-route="/'+n+'"]').last().parentNode,i!==undefined&&(s=i.parentNode.parentNode.find('section[data-hash="'+n+'"]').last(),s.destroy(),i.destroy(),e.route.hash()===n&&e.route.hash(e.route.initial))}),t;throw Error(e.label.error.invalidArguments)},s=function(){var t={},s="tabs",o="unTabs",u,a;return u=function(e,t,n){return r(this,e,t,n)},a=function(e){return i(this,e)},e.on("hash",function(e){n(e)},"tabs",abaaso,"all"),e.property(Element.prototype,s,{value:u}),e.property(Element.prototype,o,{value:a}),typeof HTMLDocument!="undefined"&&(e.property(HTMLDocument.prototype,s,{value:u}),e.property(HTMLDocument.prototype,o,{value:a})),t={active:n,create:r,destroy:i},e.module("tabs",t)};typeof define=="function"?define(["abaaso"],function(t){return e=t,s()}):e.ready?s():e.on("init",function(){s()},"abaaso.tabs")})(abaaso);
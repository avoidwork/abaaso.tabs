/**
 * abaaso.tabs
 *
 * @author Jason Mulligan <jason.mulligan@avoidwork.com>
 * @copyright 2013 Jason Mulligan
 * @license BSD-3 <https://raw.github.com/avoidwork/abaaso.tabs/master/LICENSE>
 * @link https://github.com/avoidwork/abaaso.tabs
 * @module abaaso.tabs
 * @version 1.5.2
 */
(function(){"use strict";var e=/function|string/,t,n=function(e){var n=e.replace(/\#\!?/,"").explode("/"),r=[],i="",s,o;return t("ul.tab > li > a.active, section.tab > section.active").removeClass("active"),t(".tab").addClass("hidden"),t(".root").removeClass("hidden"),n[0].isEmpty()&&n.shift(),n.forEach(function(e){s='a[data-hash="'+e+'"]',o='.tab[data-hash="'+e+'"]',s=(i!==""?'ul.active[data-hash="'+i+'"] ':".root ")+s,o=(i!==""?'.tab[data-hash="'+i+'"] ':".root ")+o,t(s).addClass("active"),t(o).addClass("active").removeClass("hidden"),i=e}),t(s+" section.active > section.tab:first-child").addClass("active"),t(o+" section.active > section.tab:first-child").addClass("active").removeClass("hidden"),i.isEmpty()||t('section[data-hash="'+n.join("/")+'"]').addClass("active").removeClass("hidden"),r},r=function(n,r,i,s){var o,u,a,f,l,c,h,p;return i instanceof Object?i["class"]="tab":i={"class":"tab"},s=s||"",l=r instanceof Array,o=n.find("> ul.tab").length>0?n.find("> ul.tab")[0]:n.create("ul",i),c=n.find("> section.tab").length>0?n.find("> section.tab")[0]:n.create("section",{"class":"tab"}),n.hasClass("tab")&&(s="/"+n.data("hash")),s.isEmpty()?(o.addClass("root"),c.addClass("root")):(p=s.replace(/^\/{1,1}/,""),o.data("hash",p),c.data("hash",p)),h=function(n,r){var i,a,p,d;f=l?n:r,u=s+"/"+f.hyphenate().toLowerCase(),i=u.replace(/^\//,""),h=typeof n=="function"?n:function(){void 0},t.route.set(i,h),d=o.create("li").create("a",{"data-hash":f.hyphenate().toLowerCase(),"data-route":u,innerHTML:f,title:f}),d.on("click",function(e){this.hasClass("disabled")||(location.hash="!"+this.data("route"))},"route",d,"all").on("delete",function(e){t.route.del(i)});switch(!0){case e.test(typeof n):case n===null:c.create("section",{"class":"tab hidden","data-hash":i});break;case typeof n=="object":c.tabs(n,null,u),a=t('section[data-hash="'+i+'"]'),n.forEach(function(e,t){var n=typeof e=="object"?t:e;a.create("section",{"class":"tab hidden","data-hash":n.toLowerCase()})})}},r instanceof Array?r.forEach(h):t.iterate(r,h),n},i=function(e,n){if(e instanceof Element&&n!==undefined)return n instanceof Array||(n=n.toString().explode()),n.forEach(function(n){var r=!1,i,s;if(n===undefined)return;n=n.toLowerCase().replace(/^\/{1,1}/,""),i=e.find('a[data-route="/'+n+'"]').last().parentNode,i!==undefined&&(s=i.parentNode.parentNode.find('section[data-hash="'+n+'"]').last(),s.destroy(),i.destroy(),t.route.hash()===n&&t.route.hash(t.route.initial))}),e;throw Error(t.label.error.invalidArguments)},s=function(){var e={},s="tabs",o="unTabs",u,a;return u=function(e,t,n){return r(this,e,t,n)},a=function(e){return i(this,e)},t.on("hash",function(e){n(e)},"tabs",t,"all"),t.property(Element.prototype,s,{value:u}),t.property(Element.prototype,o,{value:a}),typeof HTMLDocument!="undefined"&&(t.property(HTMLDocument.prototype,s,{value:u}),t.property(HTMLDocument.prototype,o,{value:a})),e={active:n,create:r,destroy:i},t.module("tabs",e)};typeof define=="function"?define(["abaaso"],function(e){return t=e,s()}):(t=abaaso,t.ready?s():t.on("init",function(){s()},"abaaso.tabs"))})();
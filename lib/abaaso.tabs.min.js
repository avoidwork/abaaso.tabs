/**
 * abaaso.tabs
 *
 * @author Jason Mulligan <jason.mulligan@avoidwork.com>
 * @copyright 2013 Jason Mulligan
 * @license BSD-3 <https://raw.github.com/avoidwork/abaaso.tabs/master/LICENSE>
 * @link https://github.com/avoidwork/abaaso.tabs
 * @module abaaso.tabs
 * @version 1.4.7
 */
(function(e){"use strict";var t,n=/function|string/,r=function(e){var n=e.explode("/"),r=[],i="",s,o;return t("ul.tab > li > a.active, section.tab > section.active").removeClass("active"),t(".tab").addClass("hidden"),t(".root").removeClass("hidden"),n[0]==="#!"&&n.shift(),n.forEach(function(e){s='a[data-hash="'+e+'"]',o='.tab[data-hash="'+e+'"]',s=(i!==""?'ul.active[data-hash="'+i+'"] ':".root ")+s,o=(i!==""?'.tab[data-hash="'+i+'"] ':".root ")+o,t(s).addClass("active"),t(o).addClass("active").removeClass("hidden"),i=e}),t(s+" section.active > section.tab:first-child").addClass("active"),t(o+" section.active > section.tab:first-child").addClass("active").removeClass("hidden"),i.isEmpty()||t('section[data-hash="'+n.join("/")+'"]').addClass("active").removeClass("hidden"),r},i=function(e,r,i,s){var o,u,a,f,l,c,h,p;return i instanceof Object?i["class"]="tab":i={"class":"tab"},s=s||"",l=r instanceof Array,o=e.find("> ul.tab").length>0?e.find("> ul.tab")[0]:e.create("ul",i),c=e.find("> section.tab").length>0?e.find("> section.tab")[0]:e.create("section",{"class":"tab"}),e.hasClass("tab")&&(s="/"+e.data("hash")),s.isEmpty()?(o.addClass("root"),c.addClass("root")):(p=s.replace(/^\/{1,1}/,""),o.data("hash",p),c.data("hash",p)),h=function(e,r){var i,a,p,d;f=l?e:r,u=s+"/"+f.hyphenate().toLowerCase(),i=u.replace(/^\//,""),h=typeof e=="function"?e:function(){void 0},t.route.set(i,h),d=o.create("li").create("a",{"data-hash":f.hyphenate().toLowerCase(),"data-route":u,innerHTML:f,title:f}),d.on("click",function(e){this.hasClass("disabled")||(location.hash="!"+this.data("route"))},"route",d,"all").on("delete",function(e){t.route.del(i)});switch(!0){case n.test(typeof e):case e===null:c.create("section",{"class":"tab hidden","data-hash":i});break;case typeof e=="object":c.tabs(e,null,u),a=t('section[data-hash="'+i+'"]'),e.forEach(function(e,t){var n=typeof e=="object"?t:e;a.create("section",{"class":"tab hidden","data-hash":n.toLowerCase()})})}},r instanceof Array?r.forEach(h):t.iterate(r,h),e},s=function(e,n){if(e instanceof Element&&n!==undefined)return n instanceof Array||(n=n.toString().explode()),n.forEach(function(n){var r=!1,i,s;if(n===undefined)return;n=n.toLowerCase().replace(/^\/{1,1}/,""),i=e.find('a[data-route="/'+n+'"]').last().parentNode,i!==undefined&&(s=i.parentNode.parentNode.find('section[data-hash="'+n+'"]').last(),s.destroy(),i.destroy(),t.route.hash()===n&&t.route.hash(t.route.initial))}),e;throw Error(t.label.error.invalidArguments)},o=function(n){var o={},u="tabs",a="unTabs",f,l;return t=e[n.aliased],f=function(e,t,n){return i(this,e,t,n)},l=function(e){return s(this,e)},t.on("hash",function(e){r(e)},"tabs",n,"all"),t.property(Element.prototype,u,{value:f}),t.property(Element.prototype,a,{value:l}),typeof HTMLDocument!="undefined"&&(t.property(HTMLDocument.prototype,u,{value:f}),t.property(HTMLDocument.prototype,a,{value:l})),o={active:r,create:i,destroy:s},n.module("tabs",o)};typeof define=="function"?define(["abaaso"],function(e){return o(e)}):abaaso.ready?o(abaaso):abaaso.on("init",function(){o(abaaso)},"abaaso.tabs")})(this);
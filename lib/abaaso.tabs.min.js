/**
 * abaaso.tabs
 *
 * @author Jason Mulligan <jason.mulligan@avoidwork.com>
 * @copyright 2013 Jason Mulligan
 * @license BSD-3 <https://raw.github.com/avoidwork/abaaso.tabs/master/LICENSE>
 * @link https://github.com/avoidwork/abaaso.tabs
 * @module abaaso.tabs
 * @version 1.4.4
 */
(function(e){var t,n=function(e){var n=e.explode("/"),r=[],i="",s,o;return t(".tab .active").removeClass("active"),t(".tab").addClass("hidden"),t(".root").removeClass("hidden"),n[0]==="#!"&&n.shift(),n.forEach(function(e){s='a[data-hash="'+e+'"]',o='.tab[data-hash="'+e+'"]',s=(i!==""?'ul.active[data-hash="'+i+'"] ':".root ")+s,o=(i!==""?'.tab[data-hash="'+i+'"] ':".root ")+o,t(s).addClass("active"),t(o).addClass("active").removeClass("hidden"),i=e}),t(s+" section.active > section.tab:first-child").addClass("active"),t(o+" section.active > section.tab:first-child").addClass("active").removeClass("hidden"),i.isEmpty()||t('section[data-hash="'+n.join("/")+'"]').addClass("active").removeClass("hidden"),r},r=function(e,n,r,i){var s=/function|string/,o,u,a,f,l,c,h,p;r instanceof Object?r["class"]="tab":r={"class":"tab"},i=i||"",l=n instanceof Array,o=e.find(" > ul.tab").length>0?e.find(" > ul.tab")[0]:e.create("ul",r),c=e.find(" > section.tab").length>0?e.find(" > section.tab")[0]:e.create("section",{"class":"tab"}),e.hasClass("tab")&&(i="/"+e.data("hash"));switch(!0){case!i.isEmpty():p=i.replace(/^\/{1,1}/,""),o.data("hash",p),c.data("hash",p);break;case i.isEmpty():o.addClass("root"),c.addClass("root")}return h=function(e,n){var r,a,p,d;f=l?e:n,u=i+"/"+f.hyphenate().toLowerCase(),r=u.replace(/^\//,""),h=typeof e=="function"?e:function(){void 0},t.route.set(r,h),d=o.create("li").create("a",{"data-hash":f.hyphenate().toLowerCase(),"data-route":u,title:f}).html(f),d.on("click",function(e){this.hasClass("disabled")||(location.hash="!"+this.data("route"))},"route",d,"all").on("delete",function(e){t.route.del(r)});switch(!0){case s.test(typeof e):case e===null:c.create("section",{"class":"tab hidden","data-hash":r});break;case typeof e=="object":c.tabs(e,null,u),a=t('section[data-hash="'+r+'"]'),e.forEach(function(e,t){var n=typeof e=="object"?t:e;a.create("section",{"class":"tab hidden","data-hash":n.toLowerCase()})})}},n instanceof Array?n.forEach(h):t.iterate(n,h),e},i=function(e,n){if(e instanceof Element&&n!==undefined)return n instanceof Array||(n=String(n).explode()),n.forEach(function(n){var r=!1,i,s;n=n.toLowerCase().replace(/^\/{1,1}/,""),i=e.find('a[data-route="/'+n+'"]')[0].parentNode,typeof i!="undefined"&&(s=i.parentNode.parentNode.find('section[data-hash="'+n+'"]')[0],s.destroy(),i.destroy(),t.route.hash()===n&&t.route.hash(t.route.initial))}),e;throw Error(t.label.error.invalidArguments)},s=function(s){var o={},u="tabs",a="unTabs",f,l;return t=e[s.aliased],f=function(e,t,n){return r(this,e,t,n)},l=function(e){return i(this,e)},s.on("hash",function(e){n(e)},"tabs",s,"all"),t.property(Element.prototype,u,{value:f}),t.property(Element.prototype,a,{value:l}),typeof HTMLDocument!="undefined"&&(t.property(HTMLDocument.prototype,u,{value:f}),t.property(HTMLDocument.prototype,a,{value:l})),o={active:n,create:r,destroy:i},s.module("tabs",o)};typeof define=="function"?define(["abaaso"],function(e){return s(e)}):abaaso.on("init",function(){s(abaaso)},"abaaso.tabs")})(this);